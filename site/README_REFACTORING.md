# Структура сервера семейного дерева

Проект был реорганизован для улучшения читаемости, поддержки и масштабируемости кода.

## Структура проекта

```
site/
├── server_new.py              # Основной файл сервера (рефакторинная версия)
├── server.py                  # Старый монолитный сервер (можно удалить)
├── handlers/                  # HTTP обработчики
│   ├── __init__.py
│   └── http_handler.py        # Основной HTTP обработчик
├── api/                       # API endpoints
│   ├── __init__.py
│   └── person_api.py          # API для работы с персонами
├── services/                  # Бизнес-логика
│   ├── __init__.py
│   ├── person_service.py      # Сервис информации о персонах
│   ├── photo_service.py       # Сервис работы с фотографиями
│   ├── blog_service.py        # Сервис блогов
│   └── message_service.py     # Сервис сообщений
├── utils/                     # Утилиты
│   ├── __init__.py
│   ├── response_utils.py      # Утилиты для HTTP ответов
│   └── file_utils.py          # Утилиты для работы с файлами
├── config/                    # Конфигурация
│   ├── site_config.py
│   └── app-config.json
└── assets/                    # Статические файлы
    ├── css/
    └── js/
```

## Описание модулей

### Handlers (обработчики)
- **http_handler.py** - Основной HTTP обработчик, маршрутизация запросов

### API
- **person_api.py** - REST API для работы с персонами (CRUD операции)

### Services (сервисы)
- **person_service.py** - Работа с информацией о персонах из source.txt
- **photo_service.py** - Управление фотографиями
- **blog_service.py** - Управление записями блогов
- **message_service.py** - Управление сообщениями

### Utils (утилиты)
- **response_utils.py** - Общие функции для HTTP ответов
- **file_utils.py** - Функции для работы с файлами

## Преимущества новой структуры

1. **Разделение ответственности** - каждый модуль отвечает за свою область
2. **Легкость тестирования** - сервисы можно тестировать независимо
3. **Возможность расширения** - легко добавлять новые функции
4. **Повторное использование** - утилиты можно использовать в разных частях
5. **Читаемость** - код стал более понятным и структурированным

## Запуск сервера

```bash
python server_new.py
```

или используйте старый файл до полного перехода:

```bash
python server.py
```

## Миграция

1. Протестируйте новый сервер: `python server_new.py`
2. Убедитесь, что все функции работают корректно
3. Переименуйте файлы:
   - `server.py` → `server_old.py` (резервная копия)
   - `server_new.py` → `server.py`
4. Удалите старый файл после успешного тестирования
